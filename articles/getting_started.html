<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started with R6.tiledb • R6.tiledb</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Rubik-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Roboto_Slab-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with R6.tiledb">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">R6.tiledb</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.37</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html" aria-label="R6.TileDB"><span class="fa fa-home fa-lg"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/getting_started.html" aria-label="R6.tiledb">Getting Started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>R6.TileDB</h6></li>
    <li><a class="dropdown-item" href="../articles/introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/timetravel.html">Time - Travelling</a></li>
    <li><a class="dropdown-item" href="../articles/faq.html">Frequently Asked Questions</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>How To Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/timeseries.html">Time Series Storage</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cgiachalis/R6.tiledb/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Getting Started with R6.tiledb</h1>
            
            <h4 data-toc-skip class="date">2026-02-03</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/cgiachalis/R6.tiledb/blob/master/vignettes/getting_started.Rmd" class="external-link"><code>vignettes/getting_started.Rmd</code></a></small>
      <div class="d-none name"><code>getting_started.Rmd</code></div>
    </div>

    
    
<p>This vignette will provide an overview of key functionality. Other
vignettes will focus on specific topics in detail including how-to
examples.</p>
<div class="section level3">
<h3 id="overview">1. Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h3>
<p><code>R6.tiledb</code> offers <code>TileDBArray</code> and
<code>TileDBGroup</code> R6 objects that represent a TileDB array and
group respectively. These objects have minimum encapsulated
functionality so they can be further extended and used by other
packages.</p>
<p>The package also offers expanded versions built on top of the above
classes and can be accessed via the functional wrappers
<code><a href="../reference/tdb_array.html">tdb_array()</a></code> and <code><a href="../reference/tdb_group.html">tdb_group()</a></code>.</p>
</div>
<div class="section level3">
<h3 id="group-creation">2. Group Creation<a class="anchor" aria-label="anchor" href="#group-creation"></a>
</h3>
<p>Use <code><a href="../reference/tdb_group_create.html">tdb_group_create()</a></code> to create a group and instantiate
the <code>TileDBGroupExp</code> object.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># group uri</span></span>
<span><span class="va">uri_root</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a group</span></span>
<span><span class="va">grp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tdb_group_create.html">tdb_group_create</a></span><span class="op">(</span><span class="va">uri_root</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check if created</span></span>
<span><span class="va">grp</span><span class="op">$</span><span class="fu">exists</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># [1] TRUE</span></span></code></pre></div>
<p>Checking for members:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># no members (empty list)</span></span>
<span><span class="va">grp</span><span class="op">$</span><span class="va">members</span></span>
<span><span class="co"># list()</span></span>
<span></span>
<span><span class="co"># count members</span></span>
<span><span class="va">grp</span><span class="op">$</span><span class="fu">count_members</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># [1] 0</span></span>
<span></span>
<span><span class="co"># group's uri path</span></span>
<span><span class="va">grp</span><span class="op">$</span><span class="va">uri</span></span>
<span><span class="co"># [1] "C:\\Users\\Constantine\\AppData\\Local\\Temp\\RtmpWwFs4u\\fileef012da1882"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="array-creation">3. Array Creation<a class="anchor" aria-label="anchor" href="#array-creation"></a>
</h3>
<p>Create two arrays with URI paths relative to group.</p>
<div class="section level4">
<h4 id="array-1">Array 1<a class="anchor" aria-label="anchor" href="#array-1"></a>
</h4>
<p><code><a href="../reference/tdb_array_create.html">tdb_array_create()</a></code> is a convenient way to create an
array given a schema and instantiate a <code>TileDBArrayExp</code>
object.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># array uri</span></span>
<span><span class="va">uri_array1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">grp</span><span class="op">$</span><span class="va">uri</span>, <span class="st">"array_1"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">schema</span> <span class="op">&lt;-</span> <span class="fu">tiledb</span><span class="fu">::</span><span class="fu"><a href="https://tiledb-inc.github.io/TileDB-R/reference/tiledb_array_schema.html" class="external-link">tiledb_array_schema</a></span><span class="op">(</span></span>
<span>             dom <span class="op">=</span> <span class="fu">tiledb</span><span class="fu">::</span><span class="fu"><a href="https://tiledb-inc.github.io/TileDB-R/reference/tiledb_domain.html" class="external-link">tiledb_domain</a></span><span class="op">(</span></span>
<span>               dims <span class="op">=</span> <span class="fu">tiledb</span><span class="fu">::</span><span class="fu"><a href="https://tiledb-inc.github.io/TileDB-R/reference/tiledb_dim.html" class="external-link">tiledb_dim</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">4L</span><span class="op">)</span>, <span class="fl">4L</span>, <span class="st">"INT32"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>               attrs <span class="op">=</span> <span class="fu">tiledb</span><span class="fu">::</span><span class="fu"><a href="https://tiledb-inc.github.io/TileDB-R/reference/tiledb_attr.html" class="external-link">tiledb_attr</a></span><span class="op">(</span><span class="st">"model"</span>, type <span class="op">=</span> <span class="st">"ASCII"</span><span class="op">)</span></span>
<span>             <span class="op">)</span></span>
<span></span>
<span><span class="co"># create array_1</span></span>
<span><span class="va">arrobj_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tdb_array_create.html">tdb_array_create</a></span><span class="op">(</span><span class="va">uri_array1</span>, sch <span class="op">=</span> <span class="va">schema</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="array-2">Array 2<a class="anchor" aria-label="anchor" href="#array-2"></a>
</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># array uri</span></span>
<span><span class="va">uri_array2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">grp</span><span class="op">$</span><span class="va">uri</span>, <span class="st">"array_2"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># demo array</span></span>
<span><span class="fu"><a href="../reference/demo_array_UCBAdmissions.html">demo_array_UCBAdmissions</a></span><span class="op">(</span><span class="va">uri_array2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create array_2</span></span>
<span><span class="va">arrobj_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tdb_array.html">tdb_array</a></span><span class="op">(</span><span class="va">uri_array2</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="group-members">4. Group Members<a class="anchor" aria-label="anchor" href="#group-members"></a>
</h3>
<p>Having created a TileDB group and two arrays, we can organise
everything as a collection by adding the above arrays as group
members:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># add array_1</span></span>
<span><span class="va">grp</span><span class="op">$</span><span class="fu">set_member</span><span class="op">(</span><span class="va">arrobj_1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># add array_2</span></span>
<span><span class="va">grp</span><span class="op">$</span><span class="fu">set_member</span><span class="op">(</span><span class="va">arrobj_2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># reopen to READ mode</span></span>
<span><span class="va">grp</span><span class="op">$</span><span class="fu">reopen</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Checking for members:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># members names</span></span>
<span><span class="va">grp</span><span class="op">$</span><span class="fu">names</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># [1] "array_1" "array_2"</span></span>
<span></span>
<span><span class="co"># count members</span></span>
<span><span class="va">grp</span><span class="op">$</span><span class="fu">count_members</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># [1] 2</span></span></code></pre></div>
<p>Print group structure:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># dump raw string</span></span>
<span><span class="va">grp</span><span class="op">$</span><span class="fu">dump</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># ── TileDB Directory ──────────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># -&gt; fileef012da1882 GROUP</span></span>
<span><span class="co"># |-- array_1 ARRAY</span></span>
<span><span class="co"># |-- array_2 ARRAY</span></span>
<span></span>
<span><span class="co"># print</span></span>
<span><span class="va">grp</span></span>
<span><span class="co"># R6Class: &lt;TileDBGroupExp&gt;</span></span>
<span><span class="co"># → URI Basename: fileef012da1882</span></span>
<span><span class="co">#   • Arrays: "array_1" and "array_2"</span></span></code></pre></div>
<div class="section level4">
<h4 id="access-a-group-member">Access a Group Member<a class="anchor" aria-label="anchor" href="#access-a-group-member"></a>
</h4>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># get array_1</span></span>
<span><span class="va">arr1</span> <span class="op">&lt;-</span> <span class="va">grp</span><span class="op">$</span><span class="fu">get_member</span><span class="op">(</span><span class="st">"array_1"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print </span></span>
<span><span class="va">arr1</span></span>
<span><span class="co"># R6Class: &lt;TileDBArray&gt;</span></span>
<span><span class="co"># → URI Basename: array_1</span></span>
<span><span class="co">#   • Dimensions: "id"</span></span>
<span><span class="co">#   • Attributes: "model"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="remove-a-group-member">Remove a Group Member<a class="anchor" aria-label="anchor" href="#remove-a-group-member"></a>
</h4>
<p>Let’s remove <code>array_1</code> from group (but do not delete it
from disk).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># reopen group in WRITE mode</span></span>
<span><span class="va">grp</span><span class="op">$</span><span class="fu">reopen</span><span class="op">(</span><span class="st">"WRITE"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># remove array</span></span>
<span><span class="va">grp</span><span class="op">$</span><span class="fu">remove</span><span class="op">(</span><span class="st">"array_1"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print</span></span>
<span><span class="va">grp</span></span>
<span><span class="co"># R6Class: &lt;TileDBGroupExp&gt;</span></span>
<span><span class="co"># → URI Basename: fileef012da1882</span></span>
<span><span class="co">#   • Arrays: "array_2"</span></span></code></pre></div>
<p>List all <code>TileDB</code> resources at group’s uri path:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Find all TileDB resources (members and non-members)</span></span>
<span><span class="va">grp</span><span class="op">$</span><span class="fu">walk_group</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#    TYPE                                                                                URI</span></span>
<span><span class="co"># 1 ARRAY file:///C:/Users/Constantine/AppData/Local/Temp/RtmpWwFs4u/fileef012da1882/array_1</span></span>
<span><span class="co"># 2 ARRAY file:///C:/Users/Constantine/AppData/Local/Temp/RtmpWwFs4u/fileef012da1882/array_2</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="get-a-non-group-member">Get a non Group Member<a class="anchor" aria-label="anchor" href="#get-a-non-group-member"></a>
</h4>
<p>Checking group folder for non-members:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># check for non-members</span></span>
<span><span class="va">grp</span><span class="op">$</span><span class="fu">has_non_members</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># [1] TRUE</span></span>
<span></span>
<span><span class="co"># data.frame with non-members info</span></span>
<span><span class="va">grp</span><span class="op">$</span><span class="fu">non_members</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#    TYPE                                                                                URI</span></span>
<span><span class="co"># 1 ARRAY file:///C:/Users/Constantine/AppData/Local/Temp/RtmpWwFs4u/fileef012da1882/array_1</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="prune-a-non-group-member">Prune a non Group Member<a class="anchor" aria-label="anchor" href="#prune-a-non-group-member"></a>
</h4>
<p>Now delete group non-members:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># delete non-members</span></span>
<span><span class="va">grp</span><span class="op">$</span><span class="fu">prune_non_members</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># [1] "file:///C:/Users/Constantine/AppData/Local/Temp/RtmpWwFs4u/fileef012da1882/array_1"</span></span>
<span></span>
<span><span class="co"># data.frame with non-members info</span></span>
<span><span class="va">grp</span><span class="op">$</span><span class="fu">non_members</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># [1] TYPE URI </span></span>
<span><span class="co"># &lt;0 rows&gt; (or 0-length row.names)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="metadata">5. Metadata<a class="anchor" aria-label="anchor" href="#metadata"></a>
</h3>
<p>You can work with metadata, both for arrays and group, in two ways:
1. using the OO interface via <code>$get_metadata()</code> and
<code>$set_metadata()</code> and 2. using the functional interface with
S3 methods:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># set a single key metadata</span></span>
<span><span class="fu"><a href="../reference/metadata.html">metadata</a></span><span class="op">(</span><span class="va">grp</span>, <span class="st">"description"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"metadata value"</span></span>
<span></span>
<span><span class="co"># set multiple metadata</span></span>
<span><span class="fu"><a href="../reference/set_metadata.html">set_metadata</a></span><span class="op">(</span><span class="va">grp</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"a"</span> <span class="op">=</span> <span class="fl">1</span>, <span class="st">"b"</span> <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get a key metadata</span></span>
<span><span class="fu"><a href="../reference/metadata.html">metadata</a></span><span class="op">(</span><span class="va">grp</span>, <span class="st">"a"</span><span class="op">)</span></span>
<span><span class="co"># [1] 1</span></span>
<span></span>
<span></span>
<span><span class="co"># fetch all metadata</span></span>
<span><span class="fu"><a href="../reference/fetch_metadata.html">fetch_metadata</a></span><span class="op">(</span><span class="va">grp</span><span class="op">)</span></span>
<span><span class="co"># TileDB GROUP: &lt;R6 Class: TileDBGroupExp&gt;</span></span>
<span><span class="co"># Metadata: &lt;key,value&gt; • total 3</span></span>
<span><span class="co">#  • a: 1</span></span>
<span><span class="co">#  • b: 2</span></span>
<span><span class="co">#  • description: 'metadata value'</span></span>
<span></span>
<span><span class="co"># fetch a subset of metadata</span></span>
<span><span class="fu"><a href="../reference/fetch_metadata.html">fetch_metadata</a></span><span class="op">(</span><span class="va">grp</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># TileDB GROUP: &lt;R6 Class: TileDBGroupExp&gt;</span></span>
<span><span class="co"># Metadata: &lt;key,value&gt; • total 2</span></span>
<span><span class="co">#  • a: 1</span></span>
<span><span class="co">#  • b: 2</span></span>
<span></span>
<span></span>
<span><span class="co"># delete metadata</span></span>
<span><span class="fu"><a href="../reference/metadata.html">metadata</a></span><span class="op">(</span><span class="va">grp</span>, <span class="st">"description"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span><span class="co"># delete multiple keys</span></span>
<span><span class="fu"><a href="../reference/delete_metadata.html">delete_metadata</a></span><span class="op">(</span><span class="va">grp</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># fetch all metadata (none)</span></span>
<span><span class="fu"><a href="../reference/fetch_metadata.html">fetch_metadata</a></span><span class="op">(</span><span class="va">grp</span><span class="op">)</span></span>
<span><span class="co"># TileDB GROUP: &lt;R6 Class: TileDBGroupExp&gt;</span></span>
<span><span class="co"># Metadata: &lt;key,value&gt; • total 0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="working-with-arrays">6. Working with Arrays<a class="anchor" aria-label="anchor" href="#working-with-arrays"></a>
</h3>
<p>Using either <code>TileDBArray</code> or <code>TileDBArrayExp</code>
makes it easier to work with arrays:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># schema info</span></span>
<span><span class="va">arrobj_2</span><span class="op">$</span><span class="fu">schema_info</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#    names   types status  enum</span></span>
<span><span class="co"># 1   Dept   ASCII    Dim FALSE</span></span>
<span><span class="co"># 2 Gender   ASCII    Dim FALSE</span></span>
<span><span class="co"># 3  Admit   INT32   Attr  TRUE</span></span>
<span><span class="co"># 4   Freq FLOAT64   Attr FALSE</span></span>
<span></span>
<span><span class="co"># Has factor columns</span></span>
<span><span class="va">arrobj_2</span><span class="op">$</span><span class="fu">has_enumeration</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># Admit  Freq </span></span>
<span><span class="co">#  TRUE FALSE</span></span>
<span></span>
<span><span class="co"># fragments</span></span>
<span><span class="va">arrobj_2</span><span class="op">$</span><span class="fu">frag_num</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># [1] 3</span></span>
<span></span>
<span><span class="co"># schema version</span></span>
<span><span class="va">arrobj_2</span><span class="op">$</span><span class="va">schema_version</span></span>
<span><span class="co"># [1] 22</span></span></code></pre></div>
<div class="section level4">
<h4 id="query-array">Query Array<a class="anchor" aria-label="anchor" href="#query-array"></a>
</h4>
<p>You can built queries by using the underlying array object accessed
by active field <code>$object</code> and then using the standard
<code>tiledb</code> interface or use the <code>$tiledb_array()</code>
that opens a separate array handle which invokes the
<code><a href="https://tiledb-inc.github.io/TileDB-R/reference/tiledb_array.html" class="external-link">tiledb::tiledb_array()</a></code>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">arr</span> <span class="op">&lt;-</span> <span class="va">arrobj_2</span><span class="op">$</span><span class="va">object</span></span>
<span><span class="fu">tiledb</span><span class="fu">::</span><span class="fu"><a href="https://tiledb-inc.github.io/TileDB-R/reference/selected_points-tiledb_array-method.html" class="external-link">selected_points</a></span><span class="op">(</span><span class="va">arr</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Dept <span class="op">=</span> <span class="st">"A"</span><span class="op">)</span></span>
<span><span class="fu">tiledb</span><span class="fu">::</span><span class="fu"><a href="https://tiledb-inc.github.io/TileDB-R/reference/return_as-tiledb_array-method.html" class="external-link">return_as</a></span><span class="op">(</span><span class="va">arr</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"data.frame"</span></span>
<span></span>
<span><span class="va">arr</span><span class="op">[</span><span class="op">]</span></span>
<span><span class="co">#   Dept Gender    Admit Freq</span></span>
<span><span class="co"># 1    A Female Rejected   19</span></span>
<span><span class="co"># 2    A Female Admitted   89</span></span>
<span><span class="co"># 3    A   Male Rejected  313</span></span>
<span><span class="co"># 4    A   Male Admitted  512</span></span></code></pre></div>
<p>Using separate array handle:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">arr</span> <span class="op">&lt;-</span> <span class="va">arrobj_2</span><span class="op">$</span><span class="fu">tiledb_array</span><span class="op">(</span>selected_points <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Dept <span class="op">=</span> <span class="st">"A"</span><span class="op">)</span>,</span>
<span>                            return_as <span class="op">=</span> <span class="st">"data.frame"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">arr</span><span class="op">[</span><span class="op">]</span></span>
<span><span class="co">#   Dept Gender    Admit Freq</span></span>
<span><span class="co"># 1    A Female Rejected   19</span></span>
<span><span class="co"># 2    A Female Admitted   89</span></span>
<span><span class="co"># 3    A   Male Rejected  313</span></span>
<span><span class="co"># 4    A   Male Admitted  512</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="fragments">Fragments<a class="anchor" aria-label="anchor" href="#fragments"></a>
</h4>
<p><code>R6.tiledb</code> has dedicated R6 object
<code>TileDBFragments</code> to work with fragments. It can be accessed
either from <code>TileDBArrayExp</code> ’s <code>fragments_object</code>
field or via its wrapper <code><a href="../reference/tdb_fragments.html">tdb_fragments()</a></code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># fragment object</span></span>
<span><span class="va">fobj</span> <span class="op">&lt;-</span> <span class="va">arrobj_2</span><span class="op">$</span><span class="va">fragments_object</span></span>
<span></span>
<span><span class="co"># or directly</span></span>
<span><span class="va">fobj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tdb_fragments.html">tdb_fragments</a></span><span class="op">(</span><span class="va">arrobj_2</span><span class="op">$</span><span class="va">uri</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># last i fragments</span></span>
<span><span class="va">fobj</span><span class="op">$</span><span class="fu">get_last_ifragments</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co"># ── FRAGMENT #3 ───────────────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#  ❯ URI: file:///C:/Users/Constantine/AppData/Local/Temp/RtmpWwFs4u/fileef012da1882/array_2/__fragments/__1770118472534_1770118472534_5fc68549e3245830f7696b445007e221_22</span></span>
<span><span class="co">#  ❯ Type: sparse</span></span>
<span><span class="co">#  ❯ Non-empty domain: </span></span>
<span><span class="co">#    • Dept: [E, F] (ASCII)</span></span>
<span><span class="co">#    • Gender: [Female, Male] (ASCII)</span></span>
<span><span class="co">#  ❯ Size: 5.24 KiB</span></span>
<span><span class="co">#  ❯ Cell num: 8</span></span>
<span><span class="co">#  ❯ Timestamp range: [2026-02-03 11:34:32.533999 UTC, 2026-02-03 11:34:32.533999 UTC]</span></span>
<span><span class="co">#  ❯ Format version: 22</span></span>
<span><span class="co">#  ❯ Has consolidated metadata: FALSE</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="consolidation-and-vacuum">Consolidation and Vacuum<a class="anchor" aria-label="anchor" href="#consolidation-and-vacuum"></a>
</h4>
<p><code>TileDBArrayExp</code> class encapsulates consolidation and
vacuum operations, either stand-alone or combined and with asynchronous
variations (provided the <a href="https://cran.r-project.org/web/packages/mirai/index.html" class="external-link">mirai</a>
package is found in your system).</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># consolidate</span></span>
<span><span class="va">arrobj_2</span><span class="op">$</span><span class="fu">consolidate</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># num fragments</span></span>
<span><span class="va">arrobj_2</span><span class="op">$</span><span class="fu">frag_num</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># [1] 1</span></span>
<span></span>
<span><span class="co"># consolidated fragments to be removed</span></span>
<span><span class="va">arrobj_2</span><span class="op">$</span><span class="fu">frag_to_vacuum</span><span class="op">(</span>trunc_uri <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#    Fragment     start_timestamp       end_timestamp</span></span>
<span><span class="co">#      &lt;char&gt;              &lt;POSc&gt;              &lt;POSc&gt;</span></span>
<span><span class="co"># 1:       #1 2026-02-03 11:34:31 2026-02-03 11:34:31</span></span>
<span><span class="co"># 2:       #2 2026-02-03 11:34:31 2026-02-03 11:34:31</span></span>
<span><span class="co"># 3:       #3 2026-02-03 11:34:32 2026-02-03 11:34:32</span></span>
<span><span class="co">#                                                                  URI</span></span>
<span><span class="co">#                                                               &lt;char&gt;</span></span>
<span><span class="co"># 1: __1770118471062_1770118471062_798814059abc057515f57bed7b01832d_22</span></span>
<span><span class="co"># 2: __1770118471712_1770118471712_613630033a5372429b0d6c486f7e3c8b_22</span></span>
<span><span class="co"># 3: __1770118472534_1770118472534_5fc68549e3245830f7696b445007e221_22</span></span>
<span></span>
<span><span class="co"># refresh fragment object</span></span>
<span><span class="va">fobj</span><span class="op">$</span><span class="fu">reload_finfo</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># fragment for clean up (vacuum)</span></span>
<span><span class="va">fobj</span><span class="op">$</span><span class="fu">to_vacuum_num</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># [1] 3</span></span>
<span></span>
<span><span class="co"># vacuum</span></span>
<span><span class="va">arrobj_2</span><span class="op">$</span><span class="fu">vacuum</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># consolidated fragments to be removed</span></span>
<span><span class="va">arrobj_2</span><span class="op">$</span><span class="fu">frag_to_vacuum</span><span class="op">(</span><span class="op">)</span> <span class="co"># none</span></span>
<span><span class="co"># [1] Fragment        start_timestamp end_timestamp   URI            </span></span>
<span><span class="co"># &lt;0 rows&gt; (or 0-length row.names)</span></span></code></pre></div>
<p>Inspect array directory</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">arrobj_2</span><span class="op">$</span><span class="fu">dir_tree</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># C:/Users/Constantine/AppData/Local/Temp/RtmpWwFs4u/fileef012da1882/array_2</span></span>
<span><span class="co"># ├── __commits</span></span>
<span><span class="co"># │   └── __1770118471062_1770118472534_2be8cf29a9392254f2bdbe1bf92c2972_22.wrt</span></span>
<span><span class="co"># ├── __fragments</span></span>
<span><span class="co"># │   └── __1770118471062_1770118472534_2be8cf29a9392254f2bdbe1bf92c2972_22</span></span>
<span><span class="co"># │       ├── a0.tdb</span></span>
<span><span class="co"># │       ├── a1.tdb</span></span>
<span><span class="co"># │       ├── d0.tdb</span></span>
<span><span class="co"># │       ├── d0_var.tdb</span></span>
<span><span class="co"># │       ├── d1.tdb</span></span>
<span><span class="co"># │       ├── d1_var.tdb</span></span>
<span><span class="co"># │       ├── t.tdb</span></span>
<span><span class="co"># │       └── __fragment_metadata.tdb</span></span>
<span><span class="co"># ├── __fragment_meta</span></span>
<span><span class="co"># ├── __labels</span></span>
<span><span class="co"># ├── __meta</span></span>
<span><span class="co"># └── __schema</span></span>
<span><span class="co">#     ├── __1770118471026_1770118471026_678ac3aab092feb96d012ae1728ce83b</span></span>
<span><span class="co">#     └── __enumerations</span></span>
<span><span class="co">#         └── __408d8cf2ec5d6c7bafc5efae9078bec0_0</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># ❯ directories (6) • total size (6.77 KiB)</span></span></code></pre></div>
<p>Get fragment info</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fobj</span><span class="op">$</span><span class="fu">get_ifragment</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co"># ── FRAGMENT #1 ───────────────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#  ❯ URI: file:///C:/Users/Constantine/AppData/Local/Temp/RtmpWwFs4u/fileef012da1882/array_2/__fragments/__1770118471062_1770118472534_2be8cf29a9392254f2bdbe1bf92c2972_22</span></span>
<span><span class="co">#  ❯ Type: sparse</span></span>
<span><span class="co">#  ❯ Non-empty domain: </span></span>
<span><span class="co">#    • Dept: [A, F] (ASCII)</span></span>
<span><span class="co">#    • Gender: [Female, Male] (ASCII)</span></span>
<span><span class="co">#  ❯ Size: 6.36 KiB</span></span>
<span><span class="co">#  ❯ Cell num: 24</span></span>
<span><span class="co">#  ❯ Timestamp range: [2026-02-03 11:34:31.062000 UTC, 2026-02-03 11:34:32.533999 UTC]</span></span>
<span><span class="co">#  ❯ Format version: 22</span></span>
<span><span class="co">#  ❯ Has consolidated metadata: FALSE</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Constantinos Giachalis.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
